---
import Navigation from "./Navigation.astro";
---

<!-- NOTE(Iserila): Tried using the Window component but it didn't work as expected -,- -->
<div
    id="mobile-nav"
    class="fixed inset-y-0 left-0 z-50 w-72
         -translate-x-full
         transition-transform duration-300
         lg:hidden"
>
    <div class="window h-full">
        <div class="window-titlebar">
            <span class="window-title">navigation.lnk</span>
            <button id="close-menu" class="window-close">âœ•</button>
        </div>

        <div class="window-content gap-6">
            <Navigation mobile />
        </div>
    </div>
</div>

<div
    id="nav-backdrop"
    class="fixed inset-0 bg-black/30 backdrop-blur-sm hidden lg:hidden"
>
</div>

<script>
    const nav = document.getElementById("mobile-nav");
    const backdrop = document.getElementById("nav-backdrop");
    const openBtn = document.getElementById("open-menu");
    const closeBtn = document.getElementById("close-menu");

    function open() {
        nav?.classList.remove("-translate-x-full");
        backdrop?.classList.remove("hidden");
        openBtn?.setAttribute("aria-expanded", "true");
    }

    function close() {
        nav?.classList.add("-translate-x-full");
        backdrop?.classList.add("hidden");
        openBtn?.setAttribute("aria-expanded", "false");
    }

    openBtn?.addEventListener("click", open);
    closeBtn?.addEventListener("click", close);
    backdrop?.addEventListener("click", close);
</script>
